<!-- ì•„ì§ ì•ˆí•¨ -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ìºëŸ¬ì…€ Carousel - ìŠ¤ì™€ì´í”„ ì „ì²´</title>
    <link rel="stylesheet" href="style.css" />
    <!-- bootstrap ---ì¤‘ì— CSSëŠ” ê³ ì •(ì •ì )ì´ë¯€ë¡œ linkì— -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
  </head>
  <!-- ìˆœì„œ
  1! ì›í•˜ëŠ”êµ¬í˜„ê¸°ëŠ¥ê³¼ ë™ì‘ë°©ì‹ í•œê¸€ë¡œ ìƒì„¸íˆ ì„¤ëª…
  2! ì‘ê³  ì‰¬ìš´ê²ƒë¶€í„°, ë˜ëŠ” í° í‹€ë¶€í„° ê°œë°œ
  3! ê·¸ë‹´ì— ë³€ìˆ˜ë¡œ ë§Œë“¤ê¸°! ìµœì í™”í•˜ê¸° ë°˜ë³µë˜ëŠ”ê±° ì¤„ì´ê¸°! 
     ì¢‹ì§€ì•Šì€ ê¸°ëŠ¥ìˆìœ¼ë©´ ì˜ ì‘ë™ë˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°”ê¾¸ê¸°!  -->
  <body>
    <!-- ì—¬ê¸°ì— ìºëŸ¬ì…€ ì½”ë“œì„ ì ìœ¼ì„¸ìš” -->
    <!-- *ìˆœì„œ* 
    1. div ìŠ¬ë¼ì´ë“œ-ì»¨í…Œì´ë„ˆ 
    2. div ìŠ¬ë¼ì´ë“œ-ë°•ìŠ¤ 3ê°œ 
    3. img ê°ê° srcì†ì„±ì— ì´ë¯¸ì§€ë¥¼ ê±¸ì–´ì£¼ê¸° 
    4. div ìŠ¤íƒ€ì¼ì‹œíŠ¸CSSì— overflowë¥¼ hiddenìœ¼ë¡œ  -->
    <!-- draggable="false" ì‚¬ì§„ ëª»ì›€ì§ì´ê²Œ ë§‰ëŠ”ê±° -->
    <div style="overflow: hidden">
      <div class="slide-container">
        <div class="slide-box">
          <img src="/src/car1.png" draggable="false" />
        </div>
        <div class="slide-box">
          <img src="/src/car2.png" draggable="false" />
        </div>
        <div class="slide-box">
          <img src="/src/car3.png" draggable="false" />
        </div>
      </div>
    </div>
    <button class="before">â—€</button>
    <button class="slide-1">1</button>
    <button class="slide-2">2</button>
    <button class="slide-3">3</button>
    <button class="next">â–¶</button>

    <!-- ìŠ¤ì™€ì´í”„ê¸°ëŠ¥ -->
    <!-- 1.ë‚´ê°€ ë“œë˜ê·¸í•œ ê±°ë¦¬ë§Œí¼ ì‚¬ì§„ë„ ì™¼ìª½ìœ¼ë£¨ ì›€ì§
         2.100pxì´ìƒ ë“œë˜ê·¸ì‹œ ì†ë†“ìœ¼ë©´ 2ì‚¬ì§„ ë³´ì„ - ì•„ë‹ˆë©´ ë‹¤ì‹œ 1ë²ˆì‚¬ì§„ -->
    <!-- mousedown,mouseup,mousemove 
         í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ ë³´ì—¬ì¤Œ : e.clientX -->
    <script>
      // ë‚´ê°€ mousedowní•œê±° - mousemoveí•œê±° = ì›€ì§ì¸ê±°ë¦¬
      //ê·¸ì¹˜ë§Œ + - ì¢Œí‘œê³„ì— ìµìˆ™í•œ ìš°ë¦¬ë‹ˆê¹, ë‘ ê°’ì„ ë°”ê¿”ì„œ 'e.clientX - ì‹œì‘ì¢Œí‘œ'
      let ì‹œì‘ì¢Œí‘œ = 0; // ğŸ¯
      let ëˆŒë¦„ = false; // âœ‹
      let idx = 0; // ğŸ”¢í˜„ì¬ ìŠ¬ë¼ì´ë“œ

      const $container = document.querySelector(".slide-container"); // ğŸ§±

      //ê¸°ì¤€ ìœ„ì¹˜ : ì¸ë±ìŠ¤ â†’ -100*idx vw
      const snapToIndex = () => {
        $container.style.transition = `transform 0.5s`; //ë¶€ë“œëŸ¬ìš´ íŠ¸ë Œì§€ì…˜
        $container.style.transform = `translateX(${-100 * idx}vw)`; //ì‚¬ì§„ì´ë™
      };

      //ë“œë˜ê·¸ ì‹œì‘
      $container.addEventListener("mousedown", (e) => {
        ì‹œì‘ì¢Œí‘œ = e.clientX;
        ëˆŒë¦„ = true;
        // ë“œë˜ê·¸í•˜ëŠ” ë™ì•ˆì—ëŠ” ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì ì‹œ ë•ë‹ˆë‹¤.
        $container.style.transition = "none";
      });

      // ë“œë˜ê·¸ ì¤‘ (ê¸°ì¤€ + ë“œë˜ê·¸ì–‘)
      //calc() : ë‹¨ìœ„ê°€ ë‹¤ë¥¸ ê°’ë¼ë¦¬ ê³„ì‚°í•  ë•Œ
      $container.addEventListener("mousemove", (e) => {
        if (ëˆŒë¦„) {
          // console.log(e.clientX - ì‹œì‘ì¢Œí‘œ); // ë””ë²„ê¹…ìš©
          let ì›€ì§ì¸ì–‘ = e.clientX - ì‹œì‘ì¢Œí‘œ;

          $container.style.transform = `translateX(calc(${
            -100 * idx
          }vw+ ${ì›€ì§ì¸ì–‘}px))`; //vwê°€ ì•„ë‹Œ px
        }
      });

      //ë“œë˜ê·¸ ì¢…ë£Œ
      $container.addEventListener("mouseup", (e) => {
        ëˆŒë¦„ = false;
        // ë§ˆìš°ìŠ¤ë¥¼ ë–¼ë©´ ë‹¤ì‹œ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì ìš© (ì ìš©ê°’ ë”°ì˜´í‘œë¡œ ê°ì‹¸ì£¼ê¸°)
        $container.style.transition = "transform 0.5s";

        if (ì›€ì§ì¸ì–‘ < -100) {
          //-100pxë³´ë‹¤ ë„˜ì–´ê°€ê²Œ ë§ì´ ì›€ì§ì˜€ìœ¼ë©´ ë‹¤ìŒ ì‚¬ì§„ìœ¼ë¡œ
          $container.style.transform = "translateX(-100vw)";
        } else {
          // ì•„ë‹ˆë©´ ì›ë˜ ì‚¬ì§„ìœ¼ë¡œ
          $container.style.transform = "translateX(0vw)";
        }

        //ì• ë‹ˆë©”ì´ì…˜ ëë‚¬ì„ë•Œë§Œ transitionë„ê¸° (setTimeoutì€ ì¼ì •ì‹œê°„ í›„ êº¼ì§€ëŠ”ê±°ì„, transitionendê°€ ë” ê¶Œì¥ë¨)
        $container.addEventListener("transitionend", () => {
          $container.style.transition = "none";
        });
      });
    </script>

    <!-- ìŠ¤ì™€ì´í”„ê¸°ëŠ¥ - ëª¨ë°”ì¼ë²„ì „ğŸ“±â˜ï¸ -->
    <!-- touchstart, touchmove, touchend -->
    <script>
      $firstBox.addEventListener("touchstart", (e) => {
        ì‹œì‘ì¢Œí‘œ = e.touches[0].clientX;
        ëˆŒë¦„ = true;
        $container.style.transition = "none";
      });

      $firstBox.addEventListener("touchmove", (e) => {
        if (ëˆŒë¦„) {
          document.querySelector(
            ".slide-container"
          ).style.transform = `translateX(${
            e.touches[0].clientX - ì‹œì‘ì¢Œí‘œ
          }px)`; //vwê°€ ì•„ë‹Œ px
        }
      });

      $firstBox.addEventListener("touchend", (e) => {
        ëˆŒë¦„ = false;
        $container.style.transition = "transform 0.5s";

        if (e.changedTouches[0].clientX - ì‹œì‘ì¢Œí‘œ < -100) {
          $container.style.transform = "translateX(-100vw)";
        } else {
          $container.style.transform = "translateX(0vw)";
        }
        $container.addEventListener("transitionend", () => {
          $container.style.transition = "none";
        });
      });
    </script>

    <script>
      // console.log(clientX, clientY);
    </script>

    <!-- ë²„íŠ¼ë„˜ê¸°ê¸° ê¸°ëŠ¥ -->
    <script>
      // '.slide-1' í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´
      document.querySelector(".slide-1").addEventListener("click", () => {
        document.querySelector(".slide-container").style.transform =
          "translateX(0)";
      });

      // '.slide-2' í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´
      document.querySelector(".slide-2").addEventListener("click", () => {
        //slide-containerì˜ ìŠ¤íƒ€ì¼ì„ ì¤‘ transformë¥¼ translateX(-100vw)ë¡œ ë°”ê¿”ì£¼ì„¸ìš”.
        document.querySelector(".slide-container").style.transform =
          "translateX(-100vw)";
      });

      //".slide-3" í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´
      document.querySelector(".slide-3").addEventListener("click", () => {
        document.querySelector(".slide-container").style.transform =
          "translateX(-200vw)";
      });

      //ë‹¤ìŒë²„íŠ¼êµ¬í˜„
      // ë²„íŠ¼ì„ í´ë¦­í•˜ë©´
      // ìŠ¬ë¼ì´ë” ì»¨í…Œì´ë„ˆì— .ìŠ¤íƒ€ì¼ì— .íŠ¸ë ŒìŠ¤í¼ì„. = translateX()
      let currentPage = 1; // í˜„ì¬ ë³´ì´ëŠ” ìŠ¬ë¼ì´ë“œ ë²ˆí˜¸ (1, 2, 3)
      document.querySelector(".next").addEventListener("click", () => {
        // 3ë²ˆì§¸ ìŠ¬ë¼ì´ë“œì—ì„  ë”ì´ìƒ ë„˜ì–´ê°€ì§€ ì•Šë„ë¡ ë§‰ê¸°
        if (currentPage >= 3) {
          return;
        }
        document.querySelector(
          ".slide-container"
        ).style.transform = `translateX(-${currentPage}00vw)`;
        currentPage += 1;
        console.log(currentPage);
      });

      //ì´ì „ë²„íŠ¼êµ¬í˜„
      document.querySelector(".before").addEventListener("click", () => {
        if (currentPage <= 1) {
          return;
        }
        // í˜„ì¬ í˜ì´ì§€(currentPage)ì—ì„œ 2ë¥¼ ë¹¼ì•¼ ì´ì „ ìŠ¬ë¼ì´ë“œì˜ ìœ„ì¹˜ê°€ ë©ë‹ˆë‹¤.
        // ì˜ˆ: í˜„ì¬ 3ë²ˆ ìŠ¬ë¼ì´ë“œ(currentPage=3) -> 2ë²ˆ ìŠ¬ë¼ì´ë“œ(-100vw)ë¡œ ê°€ë ¤ë©´ (3-2)*100 = 100
        // ì˜ˆ: í˜„ì¬ 2ë²ˆ ìŠ¬ë¼ì´ë“œ(currentPage=2) -> 1ë²ˆ ìŠ¬ë¼ì´ë“œ(0vw)ë¡œ ê°€ë ¤ë©´ (2-2)*100 = 0
        document.querySelector(
          ".slide-container"
        ).style.transform = `translateX(-${currentPage - 2}00vw)`;
        currentPage -= 1;
        console.log(currentPage);
      });
      //ì˜¤ë¥˜
      //ë¬¸ìì•ˆì— ë¯¸ë¦¬ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ë„£ê³ ì‹¶ìŒ ``ë°±í‹±ì„ ì‚¬ìš©í•´ì•¼í•¨ ("",''ëŠ” ì•ˆë¨)
    </script>
  </body>
</html>
