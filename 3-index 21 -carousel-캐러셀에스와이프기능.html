<!-- 아직 안함 -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>캐러셀 Carousel - 스와이프</title>
    <link rel="stylesheet" href="style.css" />
    <!-- bootstrap ---중에 CSS는 고정(정적)이므로 link에 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!-- 여기에 캐러셀 코드을 적으세요 -->
    <!-- *순서* 
    1. div 슬라이드-컨테이너 
    2. div 슬라이드-박스 3개 
    3. img 각각 src속성에 이미지를 걸어주기 
    4. div 스타일시트CSS에 overflow를 hidden으로  -->
    <div style="overflow: hidden">
      <div class="slide-container">
        <div class="slide-box">
          <img src="/src/car1.png" draggable="false" />
        </div>
        <div class="slide-box"><img src="/src/car2.png" /></div>
        <div class="slide-box"><img src="/src/car3.png" /></div>
      </div>
    </div>
    <button class="before">◀</button>
    <button class="slide-1">1</button>
    <button class="slide-2">2</button>
    <button class="slide-3">3</button>
    <button class="next">▶</button>

    <!-- 스와이프기능 -->
    <!-- 1.내가 드래그한 거리만큼 사진도 왼쪽으루 움직
         2.100px이상 드래그시 손놓으면 2사진 보임 - 아니면 다시 1번사진 -->
    <!-- mousedown,mouseup,mousemove 
         현재 마우스 좌표 보여줌 : e.clientX -->
    <script>
      // 내가 mousedown한거 - mousemove한거 = 움직인거리
      //그치만 + - 좌표계에 익숙한 우리니깐, 두 값을 바꿔서 'e.clientX - 시작좌표'
      let 시작좌표 = 0;
      document
        .querySelectorAll(".slide-box")[0]
        .addEventListener("mousedown", (e) => {
          시작좌표 = e.clientX;
        });

      document
        .querySelectorAll(".slide-box")[0]
        .addEventListener("mousemove", (e) => {
          console.log(e.clientX - 시작좌표);
          document.querySelector(
            ".slide-container"
          ).style.transform = `translateX(${e.clientX - 시작좌표}vw)`;
        });
    </script>

    <script>
      // console.log(clientX, clientY);
    </script>

    <!-- 버튼넘기기 기능 -->
    <script>
      // '.slide-1' 클래스를 가진 버튼을 클릭하면
      document.querySelector(".slide-1").addEventListener("click", () => {
        document.querySelector(".slide-container").style.transform =
          "translateX(0)";
      });

      // '.slide-2' 클래스를 가진 버튼을 클릭하면
      document.querySelector(".slide-2").addEventListener("click", () => {
        //slide-container의 스타일을 중 transform를 translateX(-100vw)로 바꿔주세요.
        document.querySelector(".slide-container").style.transform =
          "translateX(-100vw)";
      });

      //".slide-3" 클래스를 가진 버튼을 클릭하면
      document.querySelector(".slide-3").addEventListener("click", () => {
        document.querySelector(".slide-container").style.transform =
          "translateX(-200vw)";
      });

      //다음버튼구현
      // 버튼을 클릭하면
      // 슬라이더 컨테이너에 .스타일에 .트렌스폼을. = translateX()
      let currentPage = 1; // 현재 보이는 슬라이드 번호 (1, 2, 3)
      document.querySelector(".next").addEventListener("click", () => {
        // 3번째 슬라이드에선 더이상 넘어가지 않도록 막기
        if (currentPage >= 3) {
          return;
        }
        document.querySelector(
          ".slide-container"
        ).style.transform = `translateX(-${currentPage}00vw)`;
        currentPage += 1;
        console.log(currentPage);
      });

      //이전버튼구현
      document.querySelector(".before").addEventListener("click", () => {
        if (currentPage <= 1) {
          return;
        }
        // 현재 페이지(currentPage)에서 2를 빼야 이전 슬라이드의 위치가 됩니다.
        // 예: 현재 3번 슬라이드(currentPage=3) -> 2번 슬라이드(-100vw)로 가려면 (3-2)*100 = 100
        // 예: 현재 2번 슬라이드(currentPage=2) -> 1번 슬라이드(0vw)로 가려면 (2-2)*100 = 0
        document.querySelector(
          ".slide-container"
        ).style.transform = `translateX(-${currentPage - 2}00vw)`;
        currentPage -= 1;
        console.log(currentPage);
      });
      //오류
      //문자안에 미리선언한 변수를 넣고싶음 ``백틱을 사용해야함 ("",''는 안됨)
    </script>
  </body>
</html>
